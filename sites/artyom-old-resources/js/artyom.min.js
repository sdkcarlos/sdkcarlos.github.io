/**
 * Artyom uses webkitSpeechRecognition && SpeechSynthesisUtterance property of Google Inc.
 * Requires browser with WebKit -  This object is only supported by Google Chrome and Apple Safari.
 * 
 * @dependencies [artyomCommands.js]
 * @copyright 2015, Deutschland.
 * @author Carlos Delgado
 * @param {type} window
 * @Description Artyom JS Core - See Documentation for further information
 * @see http://sdkcarlos.github.io/artyom.html
 * @ignore 09.09.2015 14:44
 * @returns {object}
 */
!function(e){"use strict";function n(){if("object"!=typeof artyCommands)console.warn("Hey .. pss ! You have not loaded the artyom commands file. I can't do anything without it, only (artyom.test()), otherwise the execution of the things could get very very bad.");else var n=artyCommands.getCommands("en-GB");var c={};return c.initialize=function(t){if("object"!=typeof t)return void console.error("You must give the configuration for start artyom properly.");if("speechSynthesis"in e){if(t.lang){switch(t.lang){case"de":case"de-DE":s=r;break;case"en":case"en-GB":s=a;break;case"es":case"es-CO":case"es-ES":s=i;break;default:console.info("The given language for artyom is not supported yet. English has been set to default")}o.lang=t.lang}return o.continuous=t.continuous,c.is.number(t.speed)&&(o.speed=t.speed),c.is.number(t.volume)&&(o.volume=t.volume),o.listen=t.listen,o.debug=t.debug,t.mode&&(o.mode=t.mode),"undefined"!=typeof artyCommands&&(n=artyCommands.getCommands(t.lang)),o.listen===!0&&c.hey(),!0}return alert("Error en   mobil"),c.triggerEvent("error",{code:"artyom_unsupported",message:"Artyom is not supported in this browser. Please consider in update for a WebKit browser like Google Chrome"}),console.error("Artyom is not supported in this browser. Please consider in update for a WebKit browser like Google Chrome"),!1},c.fatality=function(){return o.continuous=!1,t.stop(),!0},c.shutUp=function(){do speechSynthesis.cancel();while(speechSynthesis.pending===!0)},c.getProperties=function(){return o},c.triggerEvent=function(e,n){var t=new CustomEvent(e,{detail:n});return document.dispatchEvent(t),t},c.when=function(e,n){document.addEventListener(e,function(e){n(e.detail)},!1)},c.getLanguage=function(e){if(e)switch(s){case"Google UK English Male":return"en";case"Google Español":return"es";case"Google Deutsch":return"de"}switch(s){case"Google UK English Male":return"en-GB";case"Google Español":return"es-CO";case"Google Deutsch":return"de-DE"}},c.say=function(n,t){if(c.speechSupported()){var r=function(n){var r=new SpeechSynthesisUtterance;r.text=n,r.volume=o.volume,r.rate=o.speed,s&&(r.voice=speechSynthesis.getVoices().filter(function(e){return e.name==s})[0]),r.onend=function(){speechSynthesis.pending===!1&&speechSynthesis.speaking===!1&&"function"==typeof t&&t()},e.speechSynthesis.speak(r)};if("undefined"!=typeof n.length)if(n.length>0){var i=n.split(","),a=n.split(".");i.length>a.length?i.forEach(function(e){e&&r(e)}):a.forEach(function(e){e&&r(e)}),c.triggerEvent("saySomething")}else c.debug("Artyom expects a string to say ... none given.","warn");else c.debug("Artyom expects a string to say ... undefined given.","warn")}},c.test=function(){"webkitSpeechRecognition"in e?(alert("I can hear you ! Initialize me now."),c.initialize({lang:"en-GB",listen:!1})):alert("Artyom can't listen to you in this browser. Speech Recognition is not supported in this browser."),"speechSynthesis"in e?c.say("1,2,3,4,5,6,7,8,9,10. Well, all is in order here.",function(){alert("The test of speech is over.")}):alert("Artyom can't say nothing in this browser. Speech Synthesis is not supported in this browser.")},c.speechSupported=function(){return"speechSynthesis"in e?!0:!1},c.recognizingSupported=function(){return"webkitSpeechRecognition"in e?!0:!1},c.hey=function(e){if(e)return o.recognizing=!1,void t.stop();var n,r,i;if(t.continuous=!0,t.interimResults=!0,t.lang=o.lang,t.onstart=function(){c.debug("Event reached : onStart"),o.recognizing=!0,i=!0},t.onerror=function(e){"network"==e.error&&c.triggerEvent("error",{code:"network",message:"Artyom needs internet to work properly"}),"no-speech"==e.error&&(o.continuous===!1&&c.triggerEvent("info",{code:"info_no_speech",message:"Artyom didn't hear anything. It will take a break."}),n=!0),"audio-capture"==e.error&&(i=!1,c.triggerEvent("error",{code:"audio-capture",message:"There's not any audiocapture device installed on this computer."}),n=!0),"not-allowed"==e.error&&(i=!1,e.timeStamp-r<100?c.triggerEvent("error",{code:"info_blocked",message:"Artyom needs the permision of the microphone, is blocked."}):c.triggerEvent("error",{code:"info_denied",message:"Artyom needs the permision of the microphone, is denied"}),n=!0)},t.onend=function(){c.triggerEvent("FinishRecognition",{code:"artyom_dont_listen",message:"Artyom stop listening."}),o.continuous===!0&&(i===!0?(t.start(),c.debug("Artyom initialization finished. Restarting","info")):console.error("Verify the microphone and check for the table of errors in sdkcarlos.github.io/artyom.html to solve your problem. If you want to give your user a message when an error appears add an artyom listener")),o.recognizing=!1},t.onresult=function(e){var n="",r=e.results.length;if(c.triggerEvent("Recognition",{code:"artyom_listen",message:"Artyom is listening to you."}),"normal"==o.mode)for(var i=e.resultIndex;r>i;++i){var a=e.results[i][0].transcript;if(e.results[i].isFinal){var s=c.execute(a.trim());if(n+=e.results[i][0].transcript,s!==!1&&1==o.recognizing){c.debug("<< Executing Matching Recognition in normal mode>>"),t.stop(),o.recognizing=!1,s.wildcard?(console.log(s),s.objeto.action(s.indice,s.wildcard.item,s.wildcard.full)):s.objeto.action(s.indice);break}}else c.debug("Normal mode : "+a)}else if("quick"==o.mode)for(var i=e.resultIndex;r>i;++i){var a=e.results[i][0].transcript;if(e.results[i].isFinal){var s=c.execute(a.trim());if(s!==!1&&1==o.recognizing){c.debug("<< Executing Matching Recognition in quick mode>>"),t.stop(),o.recognizing=!1,s.objeto.action(s.indice);break}}else{var s=c.execute(a.trim());if(n+=e.results[i][0].transcript,s!==!1&&1==o.recognizing){c.debug("<< Executing Matching Recognition in quick mode>>"),t.stop(),o.recognizing=!1,s.wildcard?s.objeto.action(s.indice,s.wildcard.item):s.objeto.action(s.indice);break}}c.debug("Complex mode : "+a)}},o.recognizing)t.stop(),c.debug("Reconocimiento de voz detenido.");else try{t.start(),n=!1}catch(a){c.notice({callback:function(){alertify.notify("Restart","custom",15,function(){location.reload()})},es:"Error fatal 01: Ya hay una instancia de artyom ejecutandose. Es recomendable reiniciar la conexión. Haga clic en el banner para reiniciarla ahora.",de:"Schwerwiegender Fehler 01: Es gibt bereits eine Instanz von artyom laufen in die background.It ist empfehlenswert, um die Verbindung neu starten Klicken Sie auf das Banner, um die Verbindung neu zu starten.",en:"Fatal Error 01 :There's already a instance of me running in the background sor. It's recommendable to restart the connection. Click the banner to restart the connection"})}},c.doInstruction=function(e){if(!e||"string"!=typeof e)return void console.warn("Cannot execute a non string command");var n=c.execute(e);"object"==typeof n?n.objeto&&n.objeto.action(n.indice):console.warn("No command founded trying with "+e)},c.execute=function(e){if(!e)return console.log("Ejecución de comando vacío."),!1;c.debug(">> "+e);for(var t=0;t<n.length;t++){for(var o=n[t],r=o.indexes,i=-1,a=0;a<r.length;a++){var s=r[a];if(o.smart){if(-1!=s.indexOf("*")){var u=s.split("*");if(u.length>2){console.warn("Artyom found a smart command with "+(u.length-1)+" wildcards. Artyom only support 1 wildcard for each command. Sorry");continue}var l=u[0],d=u[1];if(""==d||" "==d){if(-1!=e.indexOf(l)||-1!=e.toLowerCase().indexOf(l.toLowerCase())){var g=e.replace(l,"");g=g.toLowerCase().replace(l.toLowerCase(),""),i=parseInt(a)}}else if(!(-1==e.indexOf(l)&&-1==e.toLowerCase().indexOf(l.toLowerCase())||-1==e.indexOf(d)&&-1==e.toLowerCase().indexOf(d.toLowerCase()))){var g=e.replace(l,"").replace(d,"");g=g.toLowerCase().replace(l.toLowerCase(),"").replace(d.toLowerCase(),""),g=g.toLowerCase().replace(d.toLowerCase(),""),i=parseInt(a)}}else console.warn("Founded command marked as SMART but have no wildcard in the indexes, remove the SMART for prevent extensive memory consuming or add the wildcard *");if(i>=0){i=parseInt(a);break}}}if(i>=0)return{indice:i,objeto:o,wildcard:{item:g,full:e}}}for(var t=0;t<n.length;t++){for(var o=n[t],r=o.indexes,i=-1,a=0;a<r.length;a++){var s=r[a];if(!o.smart){if(e===s){c.debug(">> MATCHED FULL EXACT OPTION "+s+" AGAINST "+e+" WITH INDEX "+a+" IN COMMAND ","info"),i=parseInt(a);break}if(e.toLowerCase()===s.toLowerCase()){c.debug(">> MATCHED OPTION CHANGING ALL TO LOWERCASE "+s+" AGAINST "+e+" WITH INDEX "+a+" IN COMMAND ","info"),i=parseInt(a);break}}}if(i>=0)return{indice:i,objeto:o}}for(var t=0;t<n.length;t++){for(var o=n[t],r=o.indexes,i=-1,a=0;a<r.length;a++){var s=r[a];if(!o.smart){if(e.indexOf(s)>=0){c.debug(">> MATCHED INDEX EXACT OPTION "+s+" AGAINST "+e+" WITH INDEX "+a+" IN COMMAND ","info"),i=parseInt(a);break}if(e.toLowerCase().indexOf(s.toLowerCase())>=0){c.debug(">> MATCHED INDEX OPTION CHANGING ALL TO LOWERCASE "+s+" AGAINST "+e+" WITH INDEX "+a+" IN COMMAND ","info"),i=parseInt(a);break}}}if(i>=0)return{indice:i,objeto:o}}return!1},c.fullscreen=function(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},c.debug=function(e,n){if(o.debug===!0)switch(n){case"error":console.error(e);break;case"warn":console.warn(e);case"info":console.info(e);break;default:console.log(e)}},c.is={integer:function(e){return Number(e)===e&&0===e%1},"float":function(e){return e===Number(e)&&0!==e%1},"function":function(e){return"function"==typeof e?!0:!1},object:function(e){return"object"==typeof e?!0:!1},"boolean":function(e){return"boolean"==typeof e?!0:!1},array:function(e){return e.constructor===Array?!0:!1},number:function(e){return e===parseFloat(e)},odd:function(e){return c.is.number(e)&&1===Math.abs(e)%2},even:function(e){return c.is.number(e)&&0===e%2},jQueryObject:function(e){return e instanceof jQuery?!0:!1}},c.detectErrors=function(e){return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(){e(null)},function(n){e(n)}):console.log("Artyom cant detect errors in this browser."),!1},c.sayRandom=function(e){e instanceof Array?c.say(e[Math.floor(Math.random()*e.length)]):console.error("Random quotes must be in an array !")},c}if("speechSynthesis"in e&&speechSynthesis.getVoices(),"webkitSpeechRecognition"in e)var t=new webkitSpeechRecognition,o={lang:"en-GB",recognizing:!1,continuous:!1,speed:1,volume:1,listen:!0,mode:"normal",debug:!1};var r="Google Deutsch",i="Google Español",a="Google UK English Male",s="Google UK English Male";"undefined"==typeof artyom&&(e.artyom=n())}(window);
                                                                        