if("undefined"==typeof jQuery)throw new Error("Camtasify.js requires jQuery");!function(e){e.fn.extend({camtasify:function(t){var i=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;if(!i&&t.hasOwnProperty("onUnsupported"))return t.onUnsupported(),!1;var n=this,a=e(this),r={canvas_id:"camtasify_canvas_"+a.attr("id"),video_id:"camtasify_video_"+a.attr("id")};if(0===n.length)return t.hasOwnProperty("onError")&&t.onError({name:"InexistentDOMElement",description:"Camtasify initialization needs an existent div"}),!1;a.html('<canvas id="'+r.canvas_id+'" width="100" height="100" style="display:none;"></canvas><video id="'+r.video_id+'" width="100%" height="100%" autoplay></video>');var o,s=document.getElementById(r.canvas_id),d=s.getContext("2d"),c=document.getElementById(r.video_id),u={video:!0};return o=t.hasOwnProperty("onError")?t.onError:function(e){console.log("Camtasify.js error : ",e.code),console.log(e)},navigator.getUserMedia?navigator.getUserMedia(u,function(e){c.src=e,c.play()},o):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(u,function(e){c.src=window.URL.createObjectURL(e),c.play()},o):navigator.mozGetUserMedia&&navigator.mozGetUserMedia(u,function(e){c.src=window.URL.createObjectURL(e),c.play()},o),t.hasOwnProperty("onSuccess")&&t.onSuccess({takeSnapshot:function(t){return"function"!=typeof t?!1:(s.width=e(c).width(),s.height=e(c).height(),d.drawImage(c,0,0,e(s).width(),e(s).height()),t(s.toDataURL()),!0)},close:function(){return a.empty()},pause:function(){c.pause()},play:function(){c.play()}}),!0}})}(jQuery);